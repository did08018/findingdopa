<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Latest Parkinson‚Äôs Disease treatments, including stem cell therapies and inflammation reduction.">
  <title>Latest PD Treatments</title>
  <style>
    body {
      font-family: 'Arial', sans-serif;
      background: #fef6f5;
      margin: 0;
      padding: 10px;
      color: #333;
    }
    .container {
      max-width: 1000px;
      margin: 0 auto;
      background: #fff;
      padding: 10px;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }
    h1 {
      text-align: center;
      color: #EF9280;
      margin-bottom: 10px;
      font-size: 24px;
    }
    .home-button {
      display: block;
      text-align: center;
      margin: 10px auto;
      padding: 6px 12px;
      background: #EF9280;
      color: white;
      border: none;
      border-radius: 5px;
      font-size: 14px;
      cursor: pointer;
      text-decoration: none;
      width: 100px;
    }
    .home-button:hover {
      background: #d87a6b;
    }
    .controls {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-bottom: 10px;
      justify-content: center;
    }
    select, input, button {
      padding: 6px;
      border: 1px solid #ddd;
      border-radius: 4px;
      font-size: 13px;
      background: #fff;
      box-sizing: border-box;
    }
    select, button {
      width: 130px;
    }
    input {
      flex: 1;
      min-width: 180px;
      padding-right: 64px; /* Adjusted for both buttons */
      border: 1px solid #ccc;
    }
    button {
      border: none;
      cursor: pointer;
      background: #EF9280;
      color: white;
    }
    button:hover {
      background: #d87a6b;
    }
    .search-container {
      position: relative;
      flex: 1;
      min-width: 180px;
    }
    .search-container #searchBtn {
      position: absolute;
      right: 0; /* Flush with right edge */
      top: 1px;
      bottom: 1px;
      width: 30px;
      border-radius: 0 3px 3px 0;
      background: #EF9280;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .search-container #searchBtn::before {
      content: 'üîç';
      font-size: 13px;
    }
    .search-container #clearBtn {
      position: absolute;
      right: 30px; /* Immediately left of search button */
      top: 1px;
      bottom: 1px;
      width: 30px;
      border-radius: 3px 0 0 3px;
      background: transparent;
      color: #333;
      font-size: 13px;
      display: none;
      align-items: center;
      justify-content: center;
      border-right: 1px solid #ddd;
    }
    .search-container #clearBtn:hover {
      background: #f0f0f0;
    }
    .table-wrapper {
      overflow-x: auto;
      -webkit-overflow-scrolling: touch;
    }
    table {
      width: 100%;
      min-width: 500px;
      border-collapse: collapse;
      margin-top: 10px;
    }
    th, td {
      padding: 5px;
      text-align: left;
      border-bottom: 1px solid #ddd;
      font-size: 13px;
      line-height: 1.2;
    }
    th {
      background: #EF9280;
      color: white;
      cursor: pointer;
      white-space: nowrap;
    }
    th:hover {
      background: #d87a6b;
    }
    tr:nth-child(even) {
      background: #fff5f3;
    }
    tr:hover {
      background: #ffe6e2;
    }
    a {
      color: #EF9280;
      text-decoration: none;
    }
    a:hover {
      text-decoration: underline;
    }
    th:nth-child(1), td:nth-child(1) { /* Drug Name */
      max-width: 150px;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }
    th:nth-child(2), td:nth-child(2) { /* Administration */
      width: 100px;
    }
    th:nth-child(3), td:nth-child(3) { /* Goal */
      max-width: 120px;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }
    th:nth-child(4), td:nth-child(4) { /* Trial Phase */
      width: 80px;
    }
    th:nth-child(5), td:nth-child(5) { /* Link */
      width: 50px;
    }
    th:nth-child(6), td:nth-child(6) { /* Tentative Market Date */
      width: 110px;
    }
    @media (max-width: 600px) {
      th, td {
        font-size: 12px;
        padding: 4px;
      }
      .controls {
        flex-direction: column;
        align-items: stretch;
      }
      select, button {
        width: 100%;
      }
      .search-container {
        min-width: auto;
      }
      .search-container #searchBtn,
      .search-container #clearBtn {
        width: 28px;
      }
      .search-container #clearBtn {
        right: 28px;
      }
      input {
        padding-right: 60px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Latest PD Treatments</h1>
    <a href="/" class="home-button">Home</a>
    <div class="controls">
      <div class="search-container">
        <input id="search" type="text" placeholder="Search treatments...">
        <button id="clearBtn" style="display: none;">‚úï</button>
        <button id="searchBtn"></button>
      </div>
      <select id="sortKey">
        <option value="name">Sort by Drug Name</option>
        <option value="administration">Sort by Administration</option>
        <option value="trialPhase">Sort by Trial Phase</option>
        <option value="tentativeMarketDate">Sort by Tentative Market Date</option>
      </select>
      <button id="sortOrder">‚Üì Desc</button>
    </div>
    <div class="table-wrapper">
      <table id="treatmentsTable">
        <thead>
          <tr>
            <th>Drug Name</th>
            <th>Administration</th>
            <th>Goal</th>
            <th>Trial Phase</th>
            <th>Link</th>
            <th>Tentative Market Date</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
  </div>

  <script>
    // Data: Edit this array to add new treatments
    const treatments = [
      {
        id: 1,
        name: "MSC-NTF Stem Cells",
        administration: "Injection",
        goal: "Improve motor function",
        trialPhase: "Phase 2",
        link: "https://example.com/study",
        tentativeMarketDate: "2027-06-15",
        category: "Stem Cell"
      },
      {
        id: 2,
        name: "Turmeric Derivative",
        administration: "Oral",
        goal: "Reduce inflammation",
        trialPhase: "Phase 1",
        link: "https://example.com/article",
        tentativeMarketDate: "2028-01-10",
        category: "Inflammation Reduction"
      }
    ];

    // DOM elements
    const searchInput = document.getElementById('search');
    const searchBtn = document.getElementById('searchBtn');
    const clearBtn = document.getElementById('clearBtn');
    const sortKey = document.getElementById('sortKey');
    const sortOrderBtn = document.getElementById('sortOrder');
    const tableBody = document.getElementById('treatmentsTable').querySelector('tbody');

    // State
    let currentSortKey = 'tentativeMarketDate';
    let currentSortOrder = 'desc';
    let currentSearch = '';

    // Render table
    function renderTable() {
      let filtered = treatments
        .filter(t => t.name.toLowerCase().includes(currentSearch.toLowerCase()));
      
      filtered.sort((a, b) => {
        if (currentSortKey === 'tentativeMarketDate') {
          return currentSortOrder === 'desc'
            ? new Date(b.tentativeMarketDate) - new Date(a.tentativeMarketDate)
            : new Date(a.tentativeMarketDate) - new Date(b.tentativeMarketDate);
        }
        return currentSortOrder === 'desc'
          ? b[currentSortKey].localeCompare(a[currentSortKey])
          : a[currentSortKey].localeCompare(b[currentSortKey]);
      });

      tableBody.innerHTML = '';
      filtered.forEach(t => {
        const row = document.createElement('tr');
        row.innerHTML = `
          <td>${t.name}</td>
          <td>${t.administration}</td>
          <td>${t.goal}</td>
          <td>${t.trialPhase}</td>
          <td><a href="${t.link}" target="_blank">Link</a></td>
          <td>${t.tentativeMarketDate}</td>
        `;
        tableBody.appendChild(row);
      });
    }

    // Event listeners
    function updateSearch() {
      currentSearch = searchInput.value;
      clearBtn.style.display = searchInput.value ? 'flex' : 'none';
      renderTable();
    }

    searchInput.addEventListener('input', updateSearch);

    searchBtn.addEventListener('click', updateSearch);

    clearBtn.addEventListener('click', () => {
      searchInput.value = '';
      currentSearch = '';
      clearBtn.style.display = 'none';
      renderTable();
    });

    sortKey.addEventListener('change', e => {
      currentSortKey = e.target.value;
      renderTable();
    });

    sortOrderBtn.addEventListener('click', () => {
      currentSortOrder = currentSortOrder === 'desc' ? 'asc' : 'desc';
      sortOrderBtn.textContent = currentSortOrder === 'desc' ? '‚Üì Desc' : '‚Üë Asc';
      renderTable();
    });

    // Initial render
    renderTable();
  </script>
</body>
</html>
