<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Finding Dopa ‚Äì DopeAF - This is the STUPENDOUS page</title>
  <meta name="description" content="Explore the latest in Parkinson‚Äôs disease research, treatments, and clinical trials. Finding Dopa offers resources and hope: a fix is on the way, keep fighting!.">
  <link rel="icon" href="/favicon.webp" type="image/png">
  <link rel="apple-touch-icon" href="/favicon.webp">
  <meta name="theme-color" content="#000000">
  <link href="https://fonts.googleapis.com/css2?family=Road+Rage&family=PT+Serif:wght@700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

  <style>
      html, body {
      margin: 0;
      padding: 0;
      font-family: 'Road Rage', cursive;
      background: #121212;
      color: #222;
      overscroll-behavior: none;        /* Prevent scroll chaining */
      touch-action: manipulation;       /* Prevent pinch zoom/gesture */
      overflow-x: hidden;
      }

    main {
    flex: 1;
    max-width: 90%;
    margin: 0 auto;
    padding: 10px 20px;
    box-sizing: border-box;
    max-width: 700px;
    }
    
  .hero-gradient-overlay {
   position: absolute;
   top: 0;
   left: 0;
   width: 100%;
   height: 100%;
   background: linear-gradient(to bottom, #f5f8fa 0%, rgba(245, 248, 250, 0.4) 20%, transparent 60%);
   pointer-events: none;
   }

  .hero-wrapper {
   max-width: 1200px;
   margin: 0 auto;
  }
    
 body {
  flex-direction: column;
  align-items: center;
  /*min-height: 100vh;
  max-width: 100%;
  overflow-x: hidden;*/
 }

  header {
   background-color: #121212;
  }

     .top-bar {
      display: flex;
      align-items: center;
      justify-content: center;
      background: #121212;
      padding: 10px 10px;
      flex-wrap: wrap;
      }
    
     .home-brand {
      display: flex;
      align-items: center;
      gap: 6px;
      text-decoration: none;
      color: white; /*#FF69B4;*/
      font-size: 1.1rem;
      margin-right: 12px;
      }

     .logo-text {
      font-family: monospace;
      /*font-family: 'PT Serif', serif;*/
      font-weight: 600;
      font-size: 1.2rem;
      color: white; /*#FF69B4;*/
      }

     .slider-container {
      width: 100%;
      display: flex;
      gap: 10px;
      padding: 10px;
      padding-bottom: 2px;
      overflow-x: auto;
      scrollbar-width: none;
      box-sizing: border-box;
      }

     .slider-container::-webkit-scrollbar {
      display: none;
      }

     .slide {
      flex: 0 0 auto;
      background: #121212;
      color: #121212;
      text-decoration: none;
      padding: 5px 10px;
      border-radius: 8px;
      border: 1px solid #0159a3; /*#21c520*/
      white-space: nowrap;
      font-size: 0.95rem;
      font-family: 'PT Serif', serif;
      }

     .slide-link {
      color: white;
      text-decoration: none;
      display: block;
      }

     .slide-link:hover {
      color: #00bfff;
      }

    .slider-divider {
     width: 100%;
     height: 1px;
     background-color: #21c520;
     margin: 0;
     }

    .hero-section {
     max-width: 700px;
     margin: 0 auto;
     display: flex;
     justify-content: center;
     align-items: center;
     text-align: center;
     padding: 0;
     box-sizing: border-box;
     /*margin-top: -10px;*/
     margin-top: 5px;
     padding-bottom: 0;
     padding-top: 0;
     }

    .hero-img {
  max-width: 100%;
  border-radius: 20px;
  height: auto;
  display: block;
  margin: -10px auto 2px; /* top | left/right | bottom */
  mask-image: linear-gradient(to bottom, black 80%, transparent 100%);
  -webkit-mask-image: linear-gradient(to bottom, black 80%, transparent 100%);
}

     .hero-line {
      max-width: 800px;
      margin: 0 auto;
      background-color: rgba(0, 0, 0, 0.55);
      color: #fff;
      padding: 10px 20px;
      font-family: 'Road Rage', cursive;
      font-size: clamp(1.2rem, 3vw, 2.2rem);
      text-align: center;
      text-shadow: 1px 1px 3px rgba(0,0,0,0.5);
      }

  .arrow-section {
  max-width: 700px;
  margin: 10px auto 0; /* Moves it down by 10px */
  display: flex;
  justify-content: center;
  align-items: center;
  text-align: center;
  box-sizing: border-box;
  padding: 0;
}

.arrow-img {
  max-width: 100%;
  height: auto;
  display: block;
  margin: 0 auto 0px;
  mask-image: linear-gradient(to bottom, transparent 0%, black 70%);
  -webkit-mask-image: linear-gradient(to bottom, transparent 0%, black 70%);
}
    
     .body-text-section {
      max-width: 800px;
      margin: 5px auto;
      text-align: center;
      }

     .animated-text {
      font-style: italic;
      margin-bottom: 1.2rem;
      opacity: 0;
      animation: fadeInUp 1s ease forwards;
      line-height: 1.5;
      }

    .animated-text:nth-child(1) { animation-delay: 0.3s; }
    .animated-text:nth-child(2) { animation-delay: 0.6s; }
    .animated-text:nth-child(3) { animation-delay: 0.9s; }
    .animated-text:nth-child(4) { animation-delay: 1.2s; }
    .animated-text:nth-child(5) { animation-delay: 1.5s; }
    .animated-text:nth-child(6) { animation-delay: 1.8s; }
    .animated-text:nth-child(7) { animation-delay: 2.1s; }
    .animated-text:nth-child(8) { animation-delay: 2.4s; }

    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

      footer {
      font-family: 'PT Serif', serif;
      text-align: center;
      padding: 10px 20px;
      background: #1a1a1a;
      color: white;
      font-size: 1rem;
      }
    
    @media (max-width: 700px) {
      .hero-line {
        font-size: 1.5rem;
        padding: 8px 12px;
      }
    }

 .mission-section {
  width: 100vw;
  position: relative;
  left: 50%;
  right: 50%;
  /*margin-left: -50vw;
  margin-right: -50vw;*/
  background: #f5f8fa;
  color: green;
  padding: 10px 10px;        /* less vertical padding */
  box-sizing: border-box;
  text-align: center;
  font-family: 'Road Rage', cursive;
  font-size: clamp(2rem, 5vw, 4rem); /* way bigger font, responsive */
  line-height: 1.3;
 }

 .mission-section p {
  margin: 20px 0;
 }

 .motivational-line1 {
  width: 100%;
  text-align: center;
  font-family: 'Road Rage', cursive;
  font-size: clamp(3rem, 3vw, 9rem);
  color: #FF69B4;
  box-sizing: border-box;
  white-space: normal; /* allows wrapping on small screens */
  line-height: 1.1;
  margin: 0 auto 45px auto;
  padding: 5px 0;
  margin-left: auto;
  margin-right: auto;
  margin-top: 10px;
  padding-top: 0;
 }

 .motivational-line1 p {
  margin: 0;
  padding: 0;
 }


.motivational-line p {
  margin: 5px 0;
  padding: 0;
}

    .motivational-line1 span {
  background-color: #FF69B4;
  padding: 0 12px;
  white-space: nowrap;
}

.already {
  width: 100%;
  text-align: center;
  margin: 0px 5px 15px 5px;
  font-family: 'Road Rage', cursive;
  font-size: clamp(0.8rem, 0.8vw, 0.8rem);
  color: white;
  padding: 10px 10px;
  box-sizing: border-box;
  white-space: normal; /* allows wrapping on small screens */
  line-height: 1;
}

 .already p {
  margin: 0px 0;
  padding: 0;
 }

    .already h1 {
  font-size: 2.5rem; /* Adjust this value to make the text bigger or smaller */
  color: #fff; /* Optional: Change color if you want */
}


.dopeaf {
  width: 100%;
  text-align: center;
  margin: -90px 5px -10px 5px;
  font-family: 'Road Rage', cursive;
  font-size: clamp(5rem, 5vw, 9rem);
  color: white;
  padding: 0px 0px;
  box-sizing: border-box;
  white-space: normal; /* allows wrapping on small screens */
  /*line-height: 1.3;*/
}
    
.dopeaf span {
  padding: 0 0px;
  white-space: nowrap;
}

.mission-box {
  max-width: 800px;
  margin: 30px auto;
  padding: 20px 25px;
  background-color: #e4f9e7;
  color: #222;
  font-size: 1.5rem;
  border-radius: 12px;
  border: 1.5px solid green; /* thin green border all around */
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
  line-height: 1.6;
  font-family: 'Road Rage', cursive;
  text-align: center;
}

    .quote {
  color: #007acc;
  font-style: italic;
}

strong {
  color: #000;
  font-weight: bold;
  font-style: normal;
}
.hero-message-blocks {
  max-width: 900px;
  margin: 20px auto 20px auto;
  display: flex;
  flex-direction: column;
  gap: 30px;
  padding: 0 20px;
  box-sizing: border-box;
  font-size: clamp(2rem, 2vw, 3rem);
}
    
 .message-block {
  font-family: 'Road Rage', cursive;
  line-height: 1.4;
  color: #21c520;
  background: #fff;
  padding: 20px 25px;
  /*border: 0.5px solid #228B22;*/
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
  border-radius: 6px;
  text-align: left;
  opacity: 0;
  animation: fadeInUp 1s ease forwards;
  }

.message-block:nth-child(1) { animation-delay: 0.3s; }
.message-block:nth-child(2) { animation-delay: 0.6s; }
.message-block:nth-child(3) { animation-delay: 0.9s; }

.votable {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
  margin: 0px 0 15px 0;
  max-width: 600px; /* Matches the max-width of other centered elements like .mission-box */
  padding: 20px;
  background: #121212;
  border: 1px solid #21c520; /* Green border to match theme */
  border-radius: 12px; /* Rounded corners */
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1); /* Subtle shadow for depth */
  font-family: 'PT Serif', serif;
  color: #222;
}

.votable p {
  margin: 0 0 15px 0;
  font-size: 1.2rem;
  color: white;
}

.votable div {
  display: flex;
  align-items: center;
  gap: 12px; /* Spacing between buttons and vote counts */
}

.votable button {
  background: #121212;
  color: #fff;
  border: none;
  padding: 8px 15px;
  border-radius: 6px;
  border: 1px solid #21c520;
  font-family: 'PT Serif', serif;
  font-size: 1rem;
  cursor: pointer;
  transition: background 0.3s ease;
}

.votable button:hover {
  background: #FF69B4; /* Hover effect to match .slide-link:hover */
}

.votable span {
  display: inline-block;
  min-width: 35px;
  text-align: center;
  font-family: 'PT Serif', serif;
  font-size: 1rem;
  color: #FF69B4;
}
    
  </style>
</head>
<body>

  <header>
    <div class="top-bar">
      <a href="../index.html" class="home-brand" aria-label="Home">
        <i class="fas fa-brain"></i>
        <span class="logo-text">Finding Dopa</span>
      </a>
    </div>
 </header>

  <main>

<!--<div class="message-block animated-message">Message 1</div>
<div class="message-block animated-message">Message 2</div>
<div class="message-block animated-message">Message 3</div>
-->
    
 <section class="hero-section">
    <img src="../images/DopeAF.jpg" class="hero-img" alt="Finding Dopa">
   <!--<img src="images/DopeAF.jpg" class="fade-top-bottom" alt="DopeAF"> -->
  </section> 

<section class="motivational-line1">
  <p>A fix for Parkinson's disease is <span style="color: white;">NOT</span> on the way</p>
</section>
  
<!--<section class="arrow-section">
    <img src="../images/arrow-down.jpg" class="arrow-img" alt="Finding Dope A">
  </section>-->
  
  <section class="already">
  <p>‚ãØ‚ãØ‚ãØ‚ãØ‚ãØ‚ãØ‚ãØ‚ãØ‚ãØ[ it's already here ]‚ãØ‚ãØ‚ãØ‚ãØ‚ãØ‚ãØ‚ãØ‚ãØ‚ãØ</p>
</section>

  <!--  <section class="arrow-section">
    <img src="../images/arrow-down.jpg" class="arrow-img" alt="Finding Dope A">
  </section>
  -->

 <section class="already">
  <h1>Vote for your favorite fact:</h1>
</section>
    
  <section class="dopeaf">
  <p>Dope<span style="color: #21c520;">A</span>ce<span style="font-size: 0.4em; color: #FF69B4;"> (upvote)</span><br>
     Dope<span style="color: #21c520;">F</span>lat<span style="font-size: 0.4em; color: #FF69B4;"> (downvote)</span></p>
</section>

    <!--<section class="arrow-section">
    <img src="../images/arrow-down.jpg" class="arrow-img" alt="Finding Dope A">
  </section>-->

    <div id="vote-container">

<!-- ======= H E R E ======= -->

<!--      
      
  <div class="votable" id="sentenceX">
   <p>blabla</p>
   <div>
    <button onclick="vote('sentenceX','up')">ü™© Ace</button>
    <span id="up-sentenceX">0</span>
    <button onclick="vote('sentenceX','down')">üíÄ Flat</button>
    <span id="down-sentenceX">0</span>
   </div>
  </div>
           -->

  <div class="votable" id="sentence7">
   <p>reduced inflammation and rescued nearly 90% of damaged neural cells</p>
   <div>
    <button onclick="vote('sentence7','up')">ü™© Ace</button>
    <span id="up-sentence7">0</span>
    <button onclick="vote('sentence7','down')">üíÄ Flat</button>
    <span id="down-sentence7">0</span>
   </div>
  </div>
      
<div class="votable" id="sentence6">
   <p>...early treatment with a clinical-grade drug, Œ±-methyl-L-tyrosine (Œ±-MT), a TH inhibitor, was able to reverse the pathologies in human neurons...</p>
   <p>did08018's 2¬¢: "<strong><span style="color: #FF69B4;">REVERSE</span></strong>" <= this is HUGE!</p>
   <div>
    <button onclick="vote('sentence6','up')">ü™© Ace</button>
    <span id="up-sentence6">0</span>
    <button onclick="vote('sentence6','down')">üíÄ Flat</button>
    <span id="down-sentence6">0</span>
   </div>
  </div>
      
  <div class="votable" id="sentence5">
   <p>‚ÄúAstounding‚Äù Results: Blocking One Enzyme Brings Parkinson‚Äôs-Damaged Cells Back to Life</p>
   <div>
    <button onclick="vote('sentence5','up')">ü™© Ace</button>
    <span id="up-sentence5">0</span>
    <button onclick="vote('sentence5','down')">üíÄ Flat</button>
    <span id="down-sentence5">0</span>
   </div>
  </div>
      
      <div class="votable" id="sentence4">
  <p>Recent research suggests that propranolol may offer benefits for people with Parkinson‚Äôs disease, particularly when it comes to reducing tremor.</p>
  <div>
    <button onclick="vote('sentence4','up')">ü™© Ace</button>
    <span id="up-sentence4">0</span>
    <button onclick="vote('sentence4','down')">üíÄ Flat</button>
    <span id="down-sentence4">0</span>
  </div>
</div>

<div class="votable" id="sentence3">
  <p>‚ÄúKeto diet absolutely improves multiple non-motor symptoms across the board..."</p>
  <div>
    <button onclick="vote('sentence3','up')">ü™© Ace</button>
    <span id="up-sentence3">0</span>
    <button onclick="vote('sentence3','down')">üíÄ Flat</button>
    <span id="down-sentence3">0</span>
  </div>
</div>
      
<div class="votable" id="sentence2">
  <p>"The goal is no longer just to treat symptoms, but to replace the damaged cells themselves."
‚Äî Dr. Lorenz Studer, Memorial Sloan Kettering, 2019</p>
  <div>
    <button onclick="vote('sentence2','up')">ü™© Ace</button>
    <span id="up-sentence2">0</span>
    <button onclick="vote('sentence2','down')">üíÄ Flat</button>
    <span id="down-sentence2">0</span>
  </div>
</div>
    
<div class="votable" id="sentence1">
  <p>"Stem cell therapy offers perhaps the most promising hope for a cure to Parkinson‚Äôs disease."
‚Äî Dr. Roger Barker, University of Cambridge, 2021</p>
  <div>
    <button onclick="vote('sentence1','up')">ü™© Ace</button>
    <span id="up-sentence1">0</span>
    <button onclick="vote('sentence1','down')">üíÄ Flat</button>
    <span id="down-sentence1">0</span>
  </div>
</div>
    </div>
  </main>

  <script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.13.0/firebase-app.js";
  import { getFirestore, doc, getDoc, setDoc, updateDoc, increment, onSnapshot } 
    from "https://www.gstatic.com/firebasejs/10.13.0/firebase-firestore.js";

  // --- Firebase config (unchanged) ---
  const firebaseConfig = {
    apiKey: "AIzaSyBEg9yQ6NkcbT2xzmJTaZekUenOzyFQ6dE",
    authDomain: "dopeaf-57bc2.firebaseapp.com",
    projectId: "dopeaf-57bc2",
    storageBucket: "dopeaf-57bc2.firebasestorage.app",
    messagingSenderId: "326131174073",
    appId: "1:326131174073:web:07698162567c5c9c0d6968",
    measurementId: "G-2VF4XB1HVF"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  // --- Sorting state ---
  const scores = {};
  let containerEl = null;

  function ensureVoteContainer() {
    // Try to find an existing wrapper
    containerEl = document.getElementById("vote-container");
    if (containerEl) return containerEl;

    // If none, create one and move all .votable into it
    const main = document.querySelector("main");
    const firstVotable = document.querySelector(".votable");
    if (!main || !firstVotable) return null;

    containerEl = document.createElement("div");
    containerEl.id = "vote-container";
    main.insertBefore(containerEl, firstVotable);

    // Move all votables in
    document.querySelectorAll(".votable").forEach(el => containerEl.appendChild(el));

    return containerEl;
  }

  function sortVotables() {
    // Be defensive: no crashes if container missing
    if (!containerEl) containerEl = ensureVoteContainer();
    if (!containerEl) return;

    const items = Array.from(containerEl.children).filter(el => el.classList.contains("votable"));
    items.sort((a, b) => (scores[b.id] || 0) - (scores[a.id] || 0));

    // Re-append using a fragment to avoid layout thrash
    const frag = document.createDocumentFragment();
    items.forEach(el => frag.appendChild(el));
    containerEl.appendChild(frag);
  }

  // --- Voting ---
  async function vote(contentId, type) {
    try {
      if (localStorage.getItem(`voted-${contentId}`)) {
        alert("You have already voted!");
        return;
      }

      const ref = doc(db, "votes", contentId);
      const snap = await getDoc(ref);

      if (snap.exists()) {
        await updateDoc(ref, { [type]: increment(1) });
      } else {
        await setDoc(ref, { up: 0, down: 0, [type]: 1 });
      }

      localStorage.setItem(`voted-${contentId}`, type);
    } catch (error) {
      console.error("Error voting:", error);
      alert("Failed to record vote. Please try again.");
    }
  }

  function listenVotes(contentId) {
    try {
      const ref = doc(db, "votes", contentId);
      onSnapshot(ref, (docSnap) => {
        let up = 0, down = 0;
        if (docSnap.exists()) {
          up = docSnap.data().up || 0;
          down = docSnap.data().down || 0;
        }
        const upEl = document.getElementById(`up-${contentId}`);
        const downEl = document.getElementById(`down-${contentId}`);
        if (upEl) upEl.innerText = up;
        if (downEl) downEl.innerText = down;

        scores[contentId] = up - down;
        sortVotables();
      }, (error) => {
        console.error("Error in vote listener:", error);
      });
    } catch (error) {
      console.error("Error setting up vote listener:", error);
    }
  }

  function init() {
    // Make sure the container exists (or auto-create it)
    ensureVoteContainer();

    // Find all votable IDs automatically
    const ids = Array.from(document.querySelectorAll(".votable")).map(el => el.id);

    // Start listeners
    ids.forEach(listenVotes);

    // Initial sort (in case some docs already have votes)
    sortVotables();
  }

  if (document.readyState === "loading") {
    document.addEventListener("DOMContentLoaded", init);
  } else {
    init();
  }

  // Expose globally so inline onclick handlers work with type="module"
  window.vote = vote;
  window.listenVotes = listenVotes;
</script>

  <script>
    
  // Listen to each vote

  listenVotes("sentence1");
  listenVotes("sentence2");
  listenVotes("sentence3");
  listenVotes("sentence4");
  listenVotes("sentence5");
  listenVotes("sentence6");
  listenVotes("sentence7");
  listenVotes("sentence8");
  listenVotes("sentence9");
  listenVotes("sentence10");

</script>
 </body>
</html>
