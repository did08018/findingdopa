<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Latest Parkinson‚Äôs Disease treatments, including stem cell therapies and inflammation reduction.">
  <title>Latest PD Treatments</title>
  <style>
    body {
      font-family: 'Arial', sans-serif;
      background: #fef6f5;
      margin: 0;
      padding: 10px;
      color: #333;
    }
    .container {
      max-width: 1000px;
      margin: 0 auto;
      background: #fff;
      padding: 10px;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }
    h1 {
      text-align: center;
      color: #EF9280;
      margin-bottom: 10px;
      font-size: 24px;
    }
    .home-button {
      display: block;
      text-align: center;
      margin: 10px auto;
      padding: 6px 12px;
      background: #EF9280;
      color: white;
      border: none;
      border-radius: 5px;
      font-size: 14px;
      cursor: pointer;
      text-decoration: none;
      width: 100px;
    }
    .home-button:hover {
      background: #d87a6b;
    }
    .tab-buttons {
      display: flex;
      justify-content: center;
      gap: 10px;
      margin-bottom: 15px;
    }
    .tab-button {
      padding: 8px 16px;
      background: #EF9280;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 14px;
    }
    .tab-button:hover {
      background: #d87a6b;
    }
    .tab-button.active {
      background: #d87a6b;
    }
    .tab-content {
      display: none;
    }
    .tab-content.active {
      display: block;
    }
    .controls {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 10px;
    }
    .search-container {
      flex: 0 1 auto;
      max-width: 200px;
      width: 100%;
      height: 25px;
      position: relative;
    }
    #sortKey {
      max-width: 200px;
      height: 25px;
    }
    #sortOrder {
      line-height: 25px;
      padding: 0;
      max-width: 200px;
      height: 25px;
      font-size: 14px;
      text-align: center;
    }
    select, input, button {
      padding: 6px;
      border: 1px solid #ddd;
      border-radius: 4px;
      font-size: 13px;
      background: #fff;
      box-sizing: border-box;
    }
    select, button {
      width: 130px;
    }
    input {
      flex: 1;
      padding-right: 64px;
      border: 1px solid #ccc;
    }
    button {
      border: none;
      cursor: pointer;
      background: #EF9280;
      color: white;
    }
    button:hover {
      background: #d87a6b;
    }
    .search-container input {
      width: 100%;
      padding-right: 64px;
      height: 25px;
      box-sizing: border-box;
    }
    .search-container #clearBtn,
    .search-container #searchBtn {
      position: absolute;
      top: 0;
      bottom: 0;
      width: 30px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 14px;
      padding: 0;
    }
    .search-container #clearBtn {
      right: 30px;
      background: transparent;
      color: #333;
      border: none;
      cursor: pointer;
      border-right: 1px solid #ddd;
    }
    .search-container #searchBtn {
      right: 0;
      background: #EF9280;
      border: none;
      border-radius: 0 3px 3px 0;
      color: white;
      cursor: pointer;
    }
    .search-container #searchBtn::before {
      content: 'üîç';
    }
    .search-container #clearBtn:hover {
      background: #f0f0f0;
    }
    .table-wrapper {
      overflow-x: auto;
      -webkit-overflow-scrolling: touch;
    }
    table {
      table-layout: fixed;
      width: 100%;
      border-collapse: collapse;
    }
    td, th {
      white-space: normal;
      word-wrap: break-word;
      vertical-align: top;
      padding: 8px;
      border: 1px solid #ccc;
    }
    th {
      background: #EF9280;
      color: white;
      cursor: pointer;
      white-space: nowrap;
    }
    th:hover {
      background: #d87a6b;
    }
    tr:nth-child(even) {
      background: #fff5f3;
    }
    tr:hover {
      background: #ffe6e2;
    }
    a {
      color: #EF9280;
      text-decoration: none;
    }
    a:hover {
      text-decoration: underline;
    }
    th:nth-child(1), td:nth-child(1) { /* ID */
      width: 4ch;
      text-align: center;
    }
    th:nth-child(2), td:nth-child(2) { /* Treatment */
      width: 15%;
      min-width: 100px;
    }
    th:nth-child(3), td:nth-child(3) { /* Tentative Market Date */
      width: 15%;
      min-width: 100px;
      white-space: pre-line;
    }
    th:nth-child(4), td:nth-child(4) { /* Administration */
      width: 15%;
      min-width: 100px;
    }
    th:nth-child(5), td:nth-child(5) { /* Goal */
      width: 20%;
      min-width: 120px;
    }
    th:nth-child(6), td:nth-child(6) { /* Trial Phase */
      width: 20%;
      min-width: 120px;
    }
    th:nth-child(7), td:nth-child(7) { /* Link */
      width: 10%;
      min-width: 80px;
    }
    @media (max-width: 600px) {
      th, td {
        font-size: 12px;
        padding: 4px;
      }
      .controls {
        flex-direction: column;
        align-items: stretch;
      }
      select, button {
        width: 100%;
      }
      .search-container {
        max-width: 100%;
      }
      .search-container #searchBtn,
      .search-container #clearBtn {
        width: 28px;
      }
      .search-container #clearBtn {
        right: 28px;
      }
      input {
        padding-right: 60px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Snakes & Shields</h1>
    <a href="/" class="home-button">Finding Dopa</a>
    <div class="tab-buttons">
      <button class="tab-button active" data-tab="tab1">Latest PD Treatments</button>
      <button class="tab-button" data-tab="tab2">Recent Developments</button>
    </div>
    <div id="tab1" class="tab-content active">
      <div class="controls">
        <div class="search-container">
          <input id="search1" type="text" placeholder="Search Treatment...">
          <button id="clearBtn1" style="display: none;">‚úï</button>
          <button id="searchBtn1"></button>
        </div>
        <select id="sortKey1">
          <option value="name">Sort by Treatment</option>
          <option value="tentativeMarketDate">Sort by Tentative Market Date</option>
          <option value="administration">Sort by Administration</option>
          <option value="trialPhase">Sort by Trial Phase</option>
        </select>
        <button id="sortOrder1">‚Üë Asc</button>
      </div>
      <div class="table-wrapper">
        <table id="treatmentsTable1">
          <thead>
            <tr>
              <th>#</th>
              <th>Treatment</th>
              <th>Tentative Market Date</th>
              <th>Administration</th>
              <th>Goal</th>
              <th>Trial Phase</th>
              <th>Link</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </div>
    <div id="tab2" class="tab-content">
      <div class="controls">
        <div class="search-container">
          <input id="search2" type="text" placeholder="Search Treatment...">
          <button id="clearBtn2" style="display: none;">‚úï</button>
          <button id="searchBtn2"></button>
        </div>
        <select id="sortKey2">
          <option value="name">Sort by Treatment</option>
          <option value="tentativeMarketDate">Sort by Tentative Market Date</option>
          <option value="administration">Sort by Administration</option>
          <option value="trialPhase">Sort by Trial Phase</option>
        </select>
        <button id="sortOrder2">‚Üë Asc</button>
      </div>
      <div class="table-wrapper">
        <table id="treatmentsTable2">
          <thead>
            <tr>
              <th>#</th>
              <th>Treatment</th>
              <th>Tentative Market Date</th>
              <th>Administration</th>
              <th>Goal</th>
              <th>Trial Phase</th>
              <th>Link</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </div>
  </div>

<script>
// Data for Tab 1 (Latest PD Treatments)
const treatments1 = [
  { id: 169, name: "AG01", administration: "Oral / microbial capsule (investigational)", goal: "Microbiome modulation to reduce PD-associated GI inflammation / alpha-syn spread (investigational)", trialPhase: "Early-stage / exploratory (investigational; verify source)", link: "", tentativeMarketDate: "Unknown ‚Äî limited public data; timeline depends on demonstrable clinical benefit and regulatory path" },
  { id: 168, name: "BARI", administration: "Focused ultrasound / device or acronym for a procedure (context-dependent)", goal: "Device-based tremor reduction (if referring to thalamotomy/ focused ultrasound)", trialPhase: "Device-approved uses exist (essential tremor, PD tremor) ‚Äî not a pharma trial", link: "", tentativeMarketDate: "Already in clinical use for selected indications (device-dependent)" },
  // ... (rest of the treatments1 array remains unchanged, omitted for brevity)
];

// Data for Tab 2 (Recent Developments)
const treatments2 = [
  { id: 4, name: "ARO-SNCA", administration: "Subcutaneous siRNA delivery (Arrowhead TRiM platform)", goal: "Lower alpha-synuclein production in the brain to slow Parkinson‚Äôs progression", trialPhase: "Preclinical (no human trials yet)", link: "https://www.fiercebiotech.com/biotech/novartis-takes-another-shot-alpha-synuclein-22b-arrowhead-deal", tentativeMarketDate: "2030s (early, if successful)" },
  { id: 3, name: "Allo-hMSC", administration: "Intravenous infusions (repeated doses)", goal: "Reduce neuroinflammation and improve motor function in mild-to-moderate PD", trialPhase: "Phase 2 RCT positive for three infusions (published Sep 2025)", link: "https://pubmed.ncbi.nlm.nih.gov/40891094/", tentativeMarketDate: "Late 2020s / 2030s (further trials needed)" },
  { id: 2, name: "CNM-Au8", administration: "Oral suspension", goal: "Disease-modifying treatment for PD by improving neuronal energy metabolism", trialPhase: "In development, over 600 patient years exposure without safety signals", link: "https://clene.com/about-cnm-au8", tentativeMarketDate: "2027‚Äì2028 (if trials succeed)" },
  { id: 1, name: "ND0612", administration: "Continuous subcutaneous infusion", goal: "Reduce disease burden and improve quality of life for PD patients with motor fluctuations", trialPhase: "Phase 3 (BouNDless trial positive, published in Lancet Neurology)", link: "https://www.neuroderm.com/", tentativeMarketDate: "Mid-2020s (pending regulatory approval)" }
];

// Tab switching
document.querySelectorAll('.tab-button').forEach(button => {
  button.addEventListener('click', () => {
    document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
    document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
    button.classList.add('active');
    document.getElementById(button.dataset.tab).classList.add('active');
  });
});

// Generalized table rendering function
function setupTable(tabId, treatments) {
  const searchInput = document.getElementById(`search${tabId}`);
  const searchBtn = document.getElementById(`searchBtn${tabId}`);
  const clearBtn = document.getElementById(`clearBtn${tabId}`);
  const sortKey = document.getElementById(`sortKey${tabId}`);
  const sortOrderBtn = document.getElementById(`sortOrder${tabId}`);
  const tableBody = document.getElementById(`treatmentsTable${tabId}`).querySelector('tbody');

  let currentSortKey = 'name';
  let currentSortOrder = 'asc';
  let currentSearch = '';

  // Parse market date for sorting
  function parseMarketDate(val) {
    if (!val) return Infinity;
    const firstLine = val.split('\n')[0].trim();
    if (firstLine === "Marketed" || firstLine === "Already in clinical use for selected indications (device-dependent)") return -Infinity;
    if (firstLine === "Unlikely" || firstLine === "Unknown" || firstLine === "Discontinued") return Infinity;
    const yearMatch = firstLine.match(/(\d{4})/);
    return yearMatch ? parseInt(yearMatch[0], 10) : Infinity;
  }

  // Render table with filtered and sorted data
  function renderTable() {
    // Filter based on search input
    let filtered = treatments.filter(t =>
      t.name.toLowerCase().includes(currentSearch.toLowerCase())
    );

    // Sort data
    filtered.sort((a, b) => {
      let aValue = a[currentSortKey];
      let bValue = b[currentSortKey];

      if (currentSortKey === 'tentativeMarketDate') {
        aValue = parseMarketDate(a.tentativeMarketDate);
        bValue = parseMarketDate(b.tentativeMarketDate);
        if (aValue === bValue) {
          // Secondary sort by name for equal dates
          return currentSortOrder === 'desc'
            ? b.name.localeCompare(a.name)
            : a.name.localeCompare(b.name);
        }
        return currentSortOrder === 'desc' ? bValue - aValue : aValue - bValue;
      }

      // Handle string-based sorting for other columns
      aValue = aValue ? String(aValue).toLowerCase() : '';
      bValue = bValue ? String(bValue).toLowerCase() : '';
      return currentSortOrder === 'desc'
        ? bValue.localeCompare(aValue)
        : aValue.localeCompare(bValue);
    });

    // Clear and populate table
    tableBody.innerHTML = '';
    filtered.forEach((t, index) => {
      const row = document.createElement('tr');
      const linkText = t.link ? `<a href="${t.link}" target="_blank">Link</a>` : 'N/A';
      row.innerHTML = `
        <td>${index + 1}</td>
        <td>${t.name}</td>
        <td>${t.tentativeMarketDate}</td>
        <td>${t.administration}</td>
        <td>${t.goal}</td>
        <td>${t.trialPhase}</td>
        <td>${linkText}</td>
      `;
      tableBody.appendChild(row);
    });

    // Update sort order button text
    sortOrderBtn.textContent = currentSortOrder === 'desc' ? '‚Üì Desc' : '‚Üë Asc';
  }

  // Update search and refresh table
  function updateSearch() {
    currentSearch = searchInput.value.trim();
    clearBtn.style.display = currentSearch ? 'flex' : 'none';
    renderTable();
  }

  // Event listeners
  searchInput.addEventListener('input', updateSearch);
  searchBtn.addEventListener('click', updateSearch);
  clearBtn.addEventListener('click', () => {
    searchInput.value = '';
    currentSearch = '';
    clearBtn.style.display = 'none';
    renderTable();
  });

  sortKey.addEventListener('change', e => {
    currentSortKey = e.target.value;
    renderTable();
  });

  sortOrderBtn.addEventListener('click', () => {
    currentSortOrder = currentSortOrder === 'asc' ? 'desc' : 'asc';
    renderTable();
  });

  // Initial render
  renderTable();
}

// Setup both tables
setupTable(1, treatments1);
setupTable(2, treatments2);
</script>
</body>
</html>
